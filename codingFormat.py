"""RPAmaker コーディング規約

このファイルは、プロジェクトで守るべき実装ルールを定義する。
実行コードではなく、開発時の指針として利用する。

対象:
- `CommandRPA.py`, `readLines.py`, `module/*.py`, `lib/*.py`, `tests/*.py`
"""

# ------------------------------------------------------------
# 1) 命名規約
# ------------------------------------------------------------
# モジュール: snake_case.py
# 関数: snake_case
# 変数: snake_case
# 定数: UPPER_SNAKE_CASE
# クラス: PascalCase
# Action関数: `<command_name>Action`（既存資産との整合のため）


# ------------------------------------------------------------
# 2) Docstring規約（Google風 + Params拡張）
# ------------------------------------------------------------
DOCSTRING_TEMPLATE = '''"""概要

詳細説明

Args:
    arg1 (str): 引数の説明
    arg2 (int, optional): 引数の説明

Returns:
    bool: 戻り値の説明

Raises:
    ValueError: 不正値の場合

Examples:
    >>> func("a", 1)
    True

Params:
    getParam/setParamで利用するキーの説明
    - sample.key (str): 説明

Note:
    補足事項
"""'''


# ------------------------------------------------------------
# 3) 型とシグネチャ
# ------------------------------------------------------------
# - 新規関数は可能な限り型ヒントを付与する。
# - public関数は戻り値を明示する。
# - Optional引数は None をデフォルトにし、関数内で確定させる。


# ------------------------------------------------------------
# 4) ログ規約
# ------------------------------------------------------------
# 基本方針:
# - loggerは `getMyLogger(__name__)` で取得する。
# - 例外を握りつぶさない。記録後は原則 raise する。
# - ログメッセージは「何を」「どの値で」「結果どうなったか」を含める。

LOG_LEVEL_POLICY = {
    'CRITICAL': 'システム継続不可。通常運用では発生させない。',
    'ERROR': '機能失敗。呼び出し元で対処が必要。',
    'WARNING': '継続可能だが想定外。運用上の注意が必要。',
    'INFO': '通常運用で追跡すべき主要イベント。',
    'DEBUG': '詳細調査用情報。通常運用では非表示でよい。',
}


# ------------------------------------------------------------
# 5) 例外規約
# ------------------------------------------------------------
# - `except:` は禁止。`except Exception as e:` を使う。
# - 例外メッセージには入力値・対象パスなど原因追跡情報を含める。
# - 変換/検証系は ValueError, KeyError, FileNotFoundError を優先する。


# ------------------------------------------------------------
# 6) パラメータ(getParam/setParam)規約
# ------------------------------------------------------------
# - `getParam` するキーは docstring の Params に記載する。
# - 予約キー（clip/input/?）を使う箇所は挙動を docstring の Note に明記する。
# - 新規キー追加時は `param/**/*.yaml` と README を更新する。


# ------------------------------------------------------------
# 7) readLines / command実装規約
# ------------------------------------------------------------
# - コマンド解決・実行・変数展開は責務を分離する。
# - 再帰呼び出しを使う場合は終了条件を明示する。
# - 分岐フロー制御（if/elif/else/fi）では通常コマンドのスキップ条件を壊さない。


# ------------------------------------------------------------
# 8) テスト規約
# ------------------------------------------------------------
# - commandサンプルは `tests/commands/<genre>/<genre_case>.txt` に置く。
# - テストメソッド名は `test_<genre>_<case>_<purpose>` を使う。
#   例: test_01_01_core_basic
# - 失敗時に原因が分かるように、終了コードと標準出力/標準エラーを報告する。


# ------------------------------------------------------------
# 9) 禁止事項
# ------------------------------------------------------------
FORBIDDEN_PATTERNS = [
    'bare except（except:）',
    '意味のない1文字変数（ループカウンタ除く）',
    '未使用importの放置（窓口モジュールを除く）',
    'ハードコードされた機密情報（ID/Password/Token）',
]


# ------------------------------------------------------------
# 10) PRチェックリスト
# ------------------------------------------------------------
PR_CHECKLIST = [
    'docstring（Args/Returns/Raises/Params）を記載したか',
    'ログレベルが基準に沿っているか',
    '例外メッセージに原因追跡情報があるか',
    '関連するtestsを追加・更新したか',
    'README/param定義の更新漏れがないか',
]
